import{d as E,u as G,x as _,r as k,c as m,e as a,f as t,w as s,g as n,t as u,i,k as J,j as K,y as O,z as P,A as Q,B as X,C as Y,D as Z,p as f,F as tt,G as T,H as z,a as et,v,I as st,J as at,_ as ot}from"./index-BwdTnk9D.js";import{u as lt}from"./report-C7K7dR-S.js";const dt={class:"home-container"},nt={class:"stat-cards"},rt={class:"stat-card-content"},ct={class:"stat-card-value"},it={class:"stat-card-icon"},ut={class:"stat-card-content"},_t={class:"stat-card-value"},mt={class:"stat-card-icon"},vt={class:"stat-card-content"},pt={class:"stat-card-value"},ft={class:"stat-card-icon"},ht={class:"stat-card-content"},gt={class:"stat-card-value"},wt={class:"stat-card-icon"},Dt={class:"quick-actions"},bt={class:"action-icon"},yt={class:"action-icon"},kt={class:"action-icon"},xt={class:"card-header"},Ct={key:0,class:"no-data"},$t={class:"card-header"},Rt={class:"chart-container"},At={class:"chart-placeholder"},St={class:"chart-tooltip"},Vt={class:"chart-labels"},Nt=E({__name:"Home",setup(Tt){const x=et(),C=G(),D=lt(),B=_(()=>D.reports.length),$=_(()=>C.getAllUsers().length),h=new Date,b=new Date(h);b.setDate(h.getDate()-h.getDay()),b.setHours(0,0,0,0);const R=_(()=>D.reports.filter(o=>new Date(o.createdAt)>=b).length),H=_(()=>{const o=$.value;return o?Math.round(R.value/o*100):0}),I=o=>{const e=new Date(o);return`${e.getMonth()+1}/${e.getDate()}`},A=_(()=>[...D.reports].sort((o,e)=>new Date(e.createdAt).getTime()-new Date(o.createdAt).getTime()).slice(0,5).map(o=>{var e;return{id:o.id,title:o.title||`第${o.weekNumber}周周报`,username:((e=C.getAllUsers().find(d=>d.id===1))==null?void 0:e.name)||"未知用户",submittedDate:o.createdAt}})),S=k("week"),U=k(["周一","周二","周三","周四","周五","周六","周日"]),F=k([3,5,2,7,4,1,6]),L=_(()=>{const o=h.getDay();return o===0?6:o-1}),g=o=>{x.push(o)},M=o=>{x.push(`/report/${o}`)};return(o,e)=>{const d=n("el-icon"),r=n("el-card"),c=n("el-col"),y=n("el-row"),V=n("el-button"),w=n("el-table-column"),W=n("el-table"),j=n("el-empty"),N=n("el-radio-button"),q=n("el-radio-group");return v(),m("div",dt,[a("div",nt,[t(y,{gutter:20},{default:s(()=>[t(c,{xs:24,sm:12,md:6},{default:s(()=>[t(r,{class:"stat-card stat-card-primary",shadow:"hover"},{default:s(()=>[a("div",rt,[a("div",ct,u(B.value),1),e[5]||(e[5]=a("div",{class:"stat-card-title"},"周报总数",-1))]),a("div",it,[t(d,null,{default:s(()=>[t(i(J))]),_:1})])]),_:1})]),_:1}),t(c,{xs:24,sm:12,md:6},{default:s(()=>[t(r,{class:"stat-card stat-card-success",shadow:"hover"},{default:s(()=>[a("div",ut,[a("div",_t,u(R.value),1),e[6]||(e[6]=a("div",{class:"stat-card-title"},"本周提交",-1))]),a("div",mt,[t(d,null,{default:s(()=>[t(i(K))]),_:1})])]),_:1})]),_:1}),t(c,{xs:24,sm:12,md:6},{default:s(()=>[t(r,{class:"stat-card stat-card-warning",shadow:"hover"},{default:s(()=>[a("div",vt,[a("div",pt,u($.value),1),e[7]||(e[7]=a("div",{class:"stat-card-title"},"团队成员",-1))]),a("div",ft,[t(d,null,{default:s(()=>[t(i(O))]),_:1})])]),_:1})]),_:1}),t(c,{xs:24,sm:12,md:6},{default:s(()=>[t(r,{class:"stat-card stat-card-danger",shadow:"hover"},{default:s(()=>[a("div",ht,[a("div",gt,u(H.value)+"%",1),e[8]||(e[8]=a("div",{class:"stat-card-title"},"提交率",-1))]),a("div",wt,[t(d,null,{default:s(()=>[t(i(P))]),_:1})])]),_:1})]),_:1})]),_:1})]),a("div",Dt,[t(y,{gutter:20},{default:s(()=>[t(c,{xs:24,sm:12,md:8},{default:s(()=>[t(r,{class:"action-card",shadow:"hover",onClick:e[0]||(e[0]=l=>g("/report/create"))},{default:s(()=>[a("div",bt,[t(d,null,{default:s(()=>[t(i(Q))]),_:1})]),e[9]||(e[9]=a("div",{class:"action-content"},[a("h3",null,"创建周报"),a("p",null,"记录本周工作内容和计划")],-1))]),_:1})]),_:1}),t(c,{xs:24,sm:12,md:8},{default:s(()=>[t(r,{class:"action-card",shadow:"hover",onClick:e[1]||(e[1]=l=>g("/report/list"))},{default:s(()=>[a("div",yt,[t(d,null,{default:s(()=>[t(i(X))]),_:1})]),e[10]||(e[10]=a("div",{class:"action-content"},[a("h3",null,"查看周报"),a("p",null,"浏览个人和团队的周报记录")],-1))]),_:1})]),_:1}),t(c,{xs:24,sm:12,md:8},{default:s(()=>[t(r,{class:"action-card",shadow:"hover",onClick:e[2]||(e[2]=l=>g("/profile"))},{default:s(()=>[a("div",kt,[t(d,null,{default:s(()=>[t(i(Y))]),_:1})]),e[11]||(e[11]=a("div",{class:"action-content"},[a("h3",null,"个人设置"),a("p",null,"管理个人信息和偏好设置")],-1))]),_:1})]),_:1})]),_:1})]),t(y,{gutter:20,class:"data-section"},{default:s(()=>[t(c,{xs:24,lg:14},{default:s(()=>[t(r,{class:"data-card",shadow:"hover"},{header:s(()=>[a("div",xt,[e[13]||(e[13]=a("h3",null,"最近周报",-1)),t(V,{type:"primary",text:"",onClick:e[3]||(e[3]=l=>g("/report/list"))},{default:s(()=>[e[12]||(e[12]=f(" 查看全部 ")),t(d,{class:"el-icon--right"},{default:s(()=>[t(i(tt))]),_:1})]),_:1})])]),default:s(()=>[t(W,{data:A.value,style:{width:"100%"},"header-cell-style":{background:"#f5f7fa"}},{default:s(()=>[t(w,{prop:"title",label:"标题","min-width":"180"}),t(w,{prop:"username",label:"提交人",width:"120"}),t(w,{prop:"submittedDate",label:"提交日期",width:"120"},{default:s(({row:l})=>[f(u(I(l.submittedDate)),1)]),_:1}),t(w,{width:"120",fixed:"right"},{default:s(({row:l})=>[t(V,{link:"",type:"primary",onClick:p=>M(l.id)},{default:s(()=>e[14]||(e[14]=[f(" 查看 ")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),A.value.length===0?(v(),m("div",Ct,[t(j,{description:"暂无周报数据"})])):Z("",!0)]),_:1})]),_:1}),t(c,{xs:24,lg:10},{default:s(()=>[t(r,{class:"data-card chart-card",shadow:"hover"},{header:s(()=>[a("div",$t,[e[17]||(e[17]=a("h3",null,"提交趋势",-1)),t(q,{modelValue:S.value,"onUpdate:modelValue":e[4]||(e[4]=l=>S.value=l),size:"small"},{default:s(()=>[t(N,{label:"week"},{default:s(()=>e[15]||(e[15]=[f("一周")])),_:1}),t(N,{label:"month"},{default:s(()=>e[16]||(e[16]=[f("一月")])),_:1})]),_:1},8,["modelValue"])])]),default:s(()=>[a("div",Rt,[a("div",At,[(v(!0),m(T,null,z(F.value,(l,p)=>(v(),m("div",{class:at(["chart-bar",{"current-day":p===L.value}]),key:p,style:st({height:`${l*2}px`})},[a("div",St,u(l)+"份",1)],6))),128))]),a("div",Vt,[(v(!0),m(T,null,z(U.value,(l,p)=>(v(),m("div",{key:p},u(l),1))),128))])])]),_:1})]),_:1})]),_:1})])}}}),Ht=ot(Nt,[["__scopeId","data-v-9c326c1e"]]);export{Ht as default};
